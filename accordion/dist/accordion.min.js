!function(e,i,o){var t="accordion-panel",s="."+t,a=t+"--expanded",l="."+a,c=s+"__button",r=".accordion-panel__content",d=(i.LAYOUT,i.LAYOUTEND),g=i.addAction,p=i.doAction,h=(window.location.hash,i.TRANSITION_END_EVENT);function n(n){var t=this;t.$el=n,t.single=t.$el[0].hasAttribute("data-single-open"),t.panels=t.$el.find(s),t.panels.each(function(){new u(e(this))}),t.single&&t.panels.on("expanding",t.collapseOther.bind(t)),t.panels.on("expanding",t.gtm.bind(t)),g(i.HASH_STATE_CHANGE,function(n){n=t.panels.filter("#"+n.current);n.length&&!n.hasClass(a)&&n.trigger("toggle",[!0])})}function u(n){var t=this;t.$el=n,t.$btn=t.$el.find(c),t.$content=t.$el.find(r),t.height=0,t.isOpen=!1,t.$icon=t.$el.find(".accordion-panel__icon"),t.icons={a:t.$icon.data("iconName"),b:t.$icon.data("expandedIconName")},t.$use=t.$icon.find(".icon-use"),t.$el.hasClass(a)&&t.toggle(null,!0),g(d,t.setMax,10,t),t.$btn.on("click",t.toggle.bind(t)),t.$el.on("toggle",t.toggle.bind(t)),t.$content.on(h,o.debounce(t.transitionEnd.bind(t),50))}n.prototype={collapseOther:function(n){n=e(n.target);this.panels.not(n).filter(l).trigger("toggle")},gtm:function(n){var t=e(n.target),n=t.find(".accordion-panel__button");p(i.GTM_INTERACTION,{type:"accordionExpand",$el:n,id:t.attr("id")})}},u.prototype={toggle:function(n,t){var e=this;e.isOpen=!e.isOpen,p("accordion/toggleStart",n,e.isOpen),e.$el.trigger(e.isOpen?"expanding":"collapsing"),e.transition(!t),e.swapIcons(),e.$btn.attr("aria-expanded",e.isOpen),e.$content.attr("aria-hidden",!e.isOpen)},transition:function(n){var t=this;n?(t.$content.css(t.styles()),t.applyClass(),t.isOpen||setTimeout(t.transitionEnd.bind(t),0)):t.applyClass()},transitionEnd:function(n){var t=this;n&&!t.isOpen||t.$content.css(t.styles(!0)),n&&p("accordion/toggleEnd",n,t.isOpen)},applyClass:function(){this.$el.toggleClass(a,this.isOpen)},styles:function(n){return{maxHeight:n?"":this.height}},setMax:function(){var n=this;setTimeout(function(){n.$el.hasClass(a)?n.height=n.$content.outerHeight(!0):(n.$el.addClass(a+" "+t+"--no-transition"),n.$el.height(n.$el.height()),n.height=n.$content.outerHeight(!0),n.$el.removeClass(a),n.$el.css("height",""),setTimeout(function(){n.$el.removeClass(t+"--no-transition")},250))},0)},swapIcons:function(){var n=this;if(!n.icons.b||!n.$use.length)return!1;n.$use.attr("xlink:href","#icon-"+(n.isOpen?n.icons.b:n.icons.a))}},i(function(){e(".accordion").each(function(){new n(e(this))})})}(jQuery,Estarossa,lodash);